
Description
The Reversal API is used to reverse a successful transaction. Using the Transaction ID of a previously successful transaction, M-Pesa Payments Gateway will withdraw the funds from the recipient party’s mobile money wallet and revert the funds to the mobile money wallet of the initiating party of the original transaction.
Resource URL
Address 	Port 	Path 	Ssl
api.sandbox.vm.co.mz 	18354 	/ipg/v1x/reversal/ 	✔
Header Parameters
Name 	Description 	Possible Values
Content-Type 	Application/JSON header 	application/json
Authorization 	Authorization Token 	Authorization: “Bearer” keyword followed by a space and generated Access Token from Auth API.Like “Bearer xxxxxxx”
Origin 	Cross-Origin Resource Sharing (CORS) 	developer.mpesa.vm.co.mz
Request Parameters
Name 	Description 	Type 	Required 	Possible Values
input_TransactionID 	This is the Mobile Money Platform TransactionID for a successful Transaction 	String 	✔ 	49XCDF6
input_SecurityCredential 	This gets generated by Vodacom and is used to identify and verify the business along with the ServiceProviderCode and InitiatorIdentifier 	String 	✔ 	Mpesa2019
input_InitiatorIdentifier 	This gets generated by Vodacom and is used to identify the business along with the ServiceProviderCode. 	String 	✔ 	MPesa2018
input_ThirdPartyReference 	This is the unique reference of the third party system. When there are queries about transactions, this will usually be used to track a transaction. 	String 	✔ 	11114
input_ServiceProviderCode 	Shortcode of the business where funds will be credited to. 	String 	✔ 	171717
input_ReversalAmount 	The amount for the transaction to be reversed. This parameter is optional. Should this field be in the API request, a partial to full reversal is attempted. Should this field not be in the API request, a full reversal will be attempted. 	String 	✘ 	10
Response Parameters

    Synchronous
    Asynchronous

Name 	Description 	Type 	Possible Values
output_ConversationID 	This gets generated by the Mobile Money platform. This is used to query transactions on the Mobile Money Platform. 	String 	AG_20180206_00005e7dccc6da08efa8
output_TransactionID 	This gets generated by the Mobile Money platform. This is used to query transactions on the Mobile Money Platform. 	String 	4XDF12345
output_ResponseDesc 	This gets generated by the iPG platform to indicate the status of the transaction 	String 	See response table below
output_ResponseCode 	This gets generated by the iPG platform to indicate the status of the transaction 	String 	See response table below
output_ThirdPartyReference 	This is the reference of the third party system. When there are queries about transactions, this will usually be used to track a transaction. 	String 	11114
Response Codes & Descriptions
Http Status Code 	Code 	Description
200 / 201 	INS-0 	Request processed successfully
500 	INS-1 	Internal Error
401 	INS-2 	Invalid API Key
401 	INS-4 	User is not active
401 	INS-5 	Transaction cancelled by customer
401 	INS-6 	Transaction Failed
408 	INS-9 	Request timeout
409 	INS-10 	Duplicate Transaction
400 	INS-13 	Invalid Shortcode Used
400 	INS-14 	Invalid Reference Used
400 	INS-15 	Invalid Amount Used
503 	INS-16 	Unable to handle the request due to a temporary overloading
400 	INS-17 	Invalid Transaction Reference. Length Should Be Between 1 and 20.
400 	INS-18 	Invalid TransactionID Used
400 	INS-19 	Invalid ThirdPartyReference Used
400 	INS-20 	Not All Parameters Provided. Please try again.
400 	INS-21 	Parameter validations failed. Please try again.
400 	INS-22 	Invalid Operation Type
400 	INS-23 	Unknown Status. Contact M-Pesa Support
400 	INS-24 	Invalid InitiatorIdentifier Used
400 	INS-25 	Invalid SecurityCredential Used
400 	INS-26 	Not authorized
400 	INS-993 	Direct Debit Missing
400 	INS-994 	Direct Debit Already Exists
400 	INS-995 	Customer's Profile Has Problems
400 	INS-996 	Customer Account Status Not Active
400 	INS-997 	Linking Transaction Not Found
400 	INS-998 	Invalid Market
400 	INS-2001 	Initiator authentication error.
400 	INS-2002 	Receiver invalid.
422 	INS-2006 	Insufficient balance
400 	INS-2051 	MSISDN invalid.
400 	INS-2057 	Language code invalid.
Request

PUT /ipg/v1x/reversal/ HTTP/1.1
Host: api.sandbox.vm.co.mz
Content-Type: application/json
Authorization: Bearer V3MRflz31rh3Tt/K+MCmju5sajgqSLZc0RSP+83tiBik4wwPA45D0S/yg6KIum7KMIre1sfJ/L0kMAP4me547cNAPyO46+KSu3AYqXfu7rw+2Mjep/EGz6Dx/b157hT64+h7Ck11ZhefM0O/6yVEfIOVE9AiHvr1kX3z4QPpdN/jHC93mkJmqXTHqg2wnJMmPcagg9wcL8YnJZ0hg1q+TgupODSdDJYMkr/sUTSTEk/nLY05Xo3lmm+A2C66z/GRldM00YlSESgUeqBZJwDvgAIvLnkEQ+5QmliR/yvPnK7SzGuMTcNAsoaxVg2CM5NZIJxJ3J/7Dd4GVbliCLHFn34Qxl2U1RgmS2FMl+YIRJGqxHdNCQYJL+ocS5Vpm8ijWF/PUW1Ra/qLH0R2Bc3005VTxGzM/2Pp+I6JpAar0YtZ0Ois8R4LefIv8Ng3bMpNkVQhW/675dUWxDIYq/YJrir86sdpq7GdrRu24fbE/CMRARziC3l9cVd80bAJ8S82T/Yhf4xYgQgfxAAnxe1MRDkEQu9tcXAyusRYKsTWXXLhi2AFLVsgUa9jao+iZTtAfTODxfOHP2lqbHC0uNg5uY50dYco9sYO7+ERXXibASPF0jS02vyLnNji5nXO/Mjp1jsd4YysimI9eqDv6vy5PIInVq6OLdoBRz1BAmyQPeo=
Origin: developer.mpesa.vm.co.mz


{
	"input_TransactionID": "49XCDF6",
	"input_SecurityCredential": "Mpesa2019",
	"input_InitiatorIdentifier": "MPesa2018",
	"input_ThirdPartyReference": "X35OKF",
	"input_ServiceProviderCode": "171717",
	"input_ReversalAmount": "10"
}

