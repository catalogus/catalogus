import{u as f,s as d,j as e}from"./main-B5FlV0ud.js";import{u as b}from"./useInfiniteQuery-CrAj8iZp.js";import{H as y}from"./Header-DLdij8DV.js";import{M as h}from"./map-pin-DQhXgVI1.js";import{G as j,L as v,F as N,I as w,T as k,Y as _}from"./youtube-CxqPD9E6.js";import"./x-DfPbw0Sj.js";const x=(s,r)=>s||(r?d.storage.from("author-photos").getPublicUrl(r).data.publicUrl:null),p=s=>{const r=s.social_links??{};return[{key:"website",href:r.website,icon:j,label:"Website"},{key:"linkedin",href:r.linkedin,icon:v,label:"LinkedIn"},{key:"facebook",href:r.facebook,icon:N,label:"Facebook"},{key:"instagram",href:r.instagram,icon:w,label:"Instagram"},{key:"twitter",href:r.twitter,icon:k,label:"Twitter"},{key:"youtube",href:r.youtube,icon:_,label:"YouTube"}].filter(a=>a.href)},P=({author:s})=>{const r=x(s.photo_url,s.photo_path),a=p(s),o=`/autor/${s.wp_slug||s.id}`;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"group relative aspect-[4/5] w-full overflow-hidden border border-gray-200 bg-[#f4f1ec] transition-all hover:border-gray-400",children:[r?e.jsx("img",{src:r,alt:s.name,className:"h-full w-full object-cover",loading:"lazy"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center text-5xl font-semibold text-gray-300",children:s.name.charAt(0).toUpperCase()}),a.length>0&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center gap-3 bg-black/40 opacity-0 transition-opacity duration-300 group-hover:opacity-100",children:a.map(l=>{const n=l.icon;return e.jsx("a",{href:l.href,target:"_blank",rel:"noreferrer",className:"flex h-10 w-10 items-center justify-center bg-white text-gray-900 transition-transform hover:scale-105","aria-label":l.label,onClick:t=>t.stopPropagation(),children:e.jsx(n,{className:"h-4 w-4"})},l.key)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:e.jsx("a",{href:o,className:"hover:underline",children:s.name})}),s.author_type&&e.jsx("p",{className:"text-sm text-gray-600",children:s.author_type}),(s.residence_city||s.province)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(h,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:[s.residence_city,s.province].filter(Boolean).join(", ")})]})]})]})};function T(){const s=f({queryKey:["authors","featured-spotlight"],queryFn:async()=>{const{data:t,error:i}=await d.from("authors").select("id, wp_slug, name, author_type, bio, photo_url, photo_path, social_links, residence_city, province").eq("featured",!0);if(i)throw i;if(!t||t.length===0)return null;const c=Math.floor(Math.random()*t.length);return t[c]},staleTime:6e4}),r=b({queryKey:["authors","listing",s.data?.id],queryFn:async({pageParam:t=1})=>{let i=d.from("authors").select("id, wp_slug, name, author_type, photo_url, photo_path, social_links, residence_city, province").order("name",{ascending:!0});s.data?.id&&(i=i.neq("id",s.data.id));const c=(t-1)*12,u=c+11,{data:m,error:g}=await i.range(c,u);if(g)throw g;return{authors:m??[],hasMore:m?.length===12}},getNextPageParam:(t,i)=>t.hasMore?i.length+1:void 0,initialPageParam:1,staleTime:6e4,enabled:s.isSuccess}),a=s.data,o=a?x(a.photo_url,a.photo_path):null,l=a?p(a):[],n=r.data?.pages.flatMap(t=>t.authors)??[];return e.jsxs("div",{className:"min-h-screen bg-white text-gray-900",children:[e.jsx(y,{}),e.jsxs("section",{className:"relative overflow-hidden bg-[#1c1b1a] text-white",children:[a&&o&&e.jsx("img",{src:o,alt:a.name,className:"absolute inset-0 h-full w-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/85 via-black/60 to-black/20"}),e.jsx("div",{className:"relative z-10",children:e.jsx("div",{className:"container mx-auto px-4 py-24 lg:px-15",children:e.jsxs("div",{className:"max-w-3xl space-y-5",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-white/70",children:a?"Autor em destaque":"Nossos Autores"}),e.jsx("h1",{className:"text-4xl font-semibold leading-tight md:text-6xl",children:a?a.name:"Autores"}),a?.author_type&&e.jsx("p",{className:"text-base uppercase tracking-[0.3em] text-white/70",children:a.author_type}),a?.bio&&a.bio.length>50&&e.jsxs("p",{className:"line-clamp-3 text-base leading-relaxed text-white/90",children:[a.bio.slice(0,200),"..."]}),a&&(a.residence_city||a.province)&&e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-white/80",children:[a.residence_city&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-4 w-4"}),e.jsx("span",{children:a.residence_city})]}),a.province&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-4 w-4"}),e.jsx("span",{children:a.province})]})]}),a&&l.length>0&&e.jsx("div",{className:"flex gap-3",children:l.map(t=>{const i=t.icon;return e.jsx("a",{href:t.href,target:"_blank",rel:"noreferrer",className:"flex h-10 w-10 items-center justify-center border border-white/20 bg-white/10 text-white transition hover:bg-white hover:text-gray-900","aria-label":t.label,children:e.jsx(i,{className:"h-4 w-4"})},t.key)})}),a&&e.jsx("a",{href:`/autor/${a.wp_slug||a.id}`,className:"inline-flex items-center gap-2 bg-[color:var(--brand)] px-6 py-3 text-sm font-semibold uppercase tracking-[0.2em] text-white transition-colors hover:bg-[#a25a2c]",children:"Ver perfil completo"})]})})})]}),e.jsx("main",{className:"bg-[#f8f4ef] py-20",children:e.jsxs("div",{className:"container mx-auto px-4 lg:px-15",children:[r.isLoading&&e.jsx("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:Array.from({length:12}).map((t,i)=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"aspect-[4/5] w-full animate-pulse bg-gray-100"}),e.jsx("div",{className:"h-5 w-2/3 animate-pulse bg-gray-200"}),e.jsx("div",{className:"h-4 w-1/3 animate-pulse bg-gray-100"})]},`skeleton-${i}`))}),r.isError&&e.jsx("div",{className:"rounded-none border border-gray-200 bg-white p-6 text-sm text-gray-600",children:"Falha ao carregar autores. Tente novamente."}),!r.isLoading&&!r.isError&&n.length===0&&e.jsx("div",{className:"rounded-none border border-gray-200 bg-white p-6 text-sm text-gray-600",children:"Nenhum autor encontrado."}),!r.isLoading&&!r.isError&&n.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:n.map(t=>e.jsx(P,{author:t},t.id))}),r.hasNextPage&&e.jsx("div",{className:"mt-12 flex justify-center",children:e.jsx("button",{type:"button",onClick:()=>r.fetchNextPage(),disabled:r.isFetchingNextPage,className:"rounded-none bg-[color:var(--brand)] px-8 py-3 text-sm font-semibold uppercase tracking-[0.2em] text-white transition-colors hover:bg-[#a25a2c] disabled:cursor-not-allowed disabled:opacity-50",children:r.isFetchingNextPage?"Carregando...":"Carregar mais autores"})}),r.isFetchingNextPage&&e.jsx("div",{className:"mt-8 grid gap-8 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:Array.from({length:12}).map((t,i)=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"aspect-[4/5] w-full animate-pulse bg-gray-100"}),e.jsx("div",{className:"h-5 w-2/3 animate-pulse bg-gray-200"}),e.jsx("div",{className:"h-4 w-1/3 animate-pulse bg-gray-100"})]},`loading-more-${i}`))})]})]})})]})}export{T as component};
