import{e as j,j as e,L as n,a as y,r as o}from"./main-B5FlV0ud.js";import{S as N,U as u,C,L as b,a as p,M as k,X as E}from"./x-DfPbw0Sj.js";const S=l=>l>99?"99+":String(l);function v({showLabel:l=!1,className:s,onClick:h}){const{count:r,isLoading:a}=j(),c=r>0;return e.jsxs(n,{to:"/carrinho",onClick:h,className:`relative inline-flex items-center gap-2 border border-transparent bg-white/0 px-3 py-2 text-sm font-semibold text-[color:var(--header-ink)] transition-all duration-200 hover:-translate-y-0.5 hover:text-[color:var(--header-accent)] ${s??""}`,"aria-label":a?"Carrinho":`Carrinho com ${r} ${r===1?"item":"itens"}`,children:[e.jsx(N,{className:"h-5 w-5"}),l&&e.jsx("span",{children:"Carrinho"}),!a&&c&&e.jsx("span",{className:"absolute -right-1 -top-1 flex h-5 min-w-[20px] items-center justify-center rounded-full bg-[color:var(--brand)] px-1 text-[11px] font-bold text-white",children:S(r)})]})}const g=[{label:"Inicio",href:"/",spa:!0},{label:"Autores",href:"/autores"},{label:"Noticias",href:"/noticias"},{label:"Eventos",href:"/eventos"},{label:"Loja",href:"/loja"},{label:"Sobre",href:"/sobre"}];function z(){const{session:l,profile:s,signOut:h}=y(),[r,a]=o.useState(!1),[c,w]=o.useState(!1),[x,d]=o.useState(!1);return o.useEffect(()=>{const t=()=>{const i=document.querySelector("header");i&&document.documentElement.style.setProperty("--header-height",`${i.offsetHeight}px`)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),o.useEffect(()=>{const t=document.querySelector("header");t&&document.documentElement.style.setProperty("--header-height",`${t.offsetHeight}px`)},[c]),o.useEffect(()=>{const t=()=>{w(window.scrollY>8)};return t(),window.addEventListener("scroll",t,{passive:!0}),()=>window.removeEventListener("scroll",t)},[]),o.useEffect(()=>{if(!r){document.body.style.overflow="";return}return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[r]),o.useEffect(()=>{if(!x)return;const t=()=>d(!1);return window.addEventListener("scroll",t,{passive:!0}),()=>window.removeEventListener("scroll",t)},[x]),e.jsxs("header",{className:"sticky top-0 z-50 w-full transition-all duration-300 ",style:{background:c?"var(--header-bg-scrolled)":"var(--header-bg)",borderColor:c?"var(--header-border)":"transparent"},children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 md:px-15 lg:py-6",children:[e.jsx(n,{to:"/",className:"group flex items-center gap-3",children:e.jsx("img",{src:"/logo.svg",alt:"Catalogus",className:"h-4 w-auto sm:h-4"})}),e.jsx("nav",{className:"hidden items-center gap-6 lg:flex",children:g.map(t=>{const i="relative text-xl font-medium text-[color:var(--header-ink)] transition-colors duration-200 after:absolute after:-bottom-2 after:left-0 after:h-0.5 after:w-full after:origin-left after:scale-x-0 after:bg-[color:var(--header-accent)] after:transition-transform after:duration-300 after:content-[''] hover:text-[color:var(--header-accent)] hover:after:scale-x-100";return t.spa?e.jsx(n,{to:"/",className:i,children:t.label},t.label):e.jsx("a",{href:t.href,className:i,children:t.label},t.label)})}),e.jsxs("div",{className:"hidden items-center gap-3 lg:flex",children:[e.jsx(v,{className:"bg-white/0"}),l&&s?e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>d(!x),className:"flex items-center gap-2 bg-[color:var(--header-ink)] px-4 py-2 text-sm font-semibold text-white transition-all duration-200 hover:-translate-y-0.5 hover:bg-[color:var(--header-accent)]",children:[s.photo_url?e.jsx("img",{src:s.photo_url,alt:s.name??"User",className:"h-6 w-6 object-cover"}):e.jsx(u,{className:"h-4 w-4"}),e.jsx("span",{children:s.name??l.user.email}),e.jsx(C,{className:"h-4 w-4"})]}),x&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>d(!1)}),e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white border border-gray-200 shadow-lg z-50",children:[(s.role==="admin"||s.role==="author")&&e.jsxs(n,{to:"/admin/dashboard",className:"flex items-center gap-2 px-4 py-3 text-sm text-gray-900 hover:bg-gray-100 transition-colors",onClick:()=>d(!1),children:[e.jsx(b,{className:"h-4 w-4"}),"Painel Admin"]}),e.jsxs("button",{type:"button",onClick:async()=>{d(!1),await h()},className:"flex w-full items-center gap-2 px-4 py-3 text-sm text-gray-900 hover:bg-gray-100 transition-colors",children:[e.jsx(p,{className:"h-4 w-4"}),"Sair"]})]})]})]}):e.jsx(n,{to:"/auth/sign-in",className:"bg-[color:var(--header-ink)] px-4 py-2 text-sm font-semibold text-white transition-all duration-200 hover:-translate-y-0.5 hover:bg-[color:var(--header-accent)]",children:"Entrar"})]}),e.jsxs("div",{className:"flex items-center gap-2 lg:hidden",children:[e.jsx(v,{className:"h-10 w-10 justify-center px-0"}),e.jsx("button",{type:"button",onClick:()=>a(!0),className:"flex h-10 w-10 items-center justify-center text-[color:var(--header-ink)] transition-all duration-200 hover:-translate-y-0.5 hover:border-[color:var(--header-accent)]","aria-label":"Abrir menu","aria-expanded":r,"aria-controls":"mobile-menu",children:e.jsx(k,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:`fixed inset-0 z-40 bg-black/40 transition-opacity duration-300 ${r?"opacity-100":"pointer-events-none opacity-0"}`,onClick:()=>a(!1)}),e.jsxs("aside",{id:"mobile-menu",className:`fixed right-0 top-0 z-50 flex h-full w-full max-w-sm flex-col gap-6 px-6 pb-10 pt-6 text-white transition-transform duration-300 ${r?"translate-x-0":"translate-x-full"}`,style:{background:"var(--header-panel)"},"aria-hidden":!r,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(n,{to:"/",className:"flex items-center gap-3",onClick:()=>a(!1),children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center border border-white/20 bg-white/10",children:"C"}),e.jsxs("div",{className:"leading-tight",children:[e.jsx("p",{className:"text-base font-semibold",children:"Catalogus"}),e.jsx("p",{className:"text-[11px] uppercase tracking-[0.2em] text-[color:var(--header-panel-muted)]",children:"Livraria & cultura"})]})]}),e.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex h-10 w-10 items-center justify-center border border-white/20 text-white","aria-label":"Fechar menu",children:e.jsx(E,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex flex-col gap-4 pt-4 text-lg",children:g.map((t,i)=>{const m="flex items-center justify-between border-b border-white/10 pb-3 text-white font-semibold transition-all duration-300 hover:translate-x-1 hover:text-[color:var(--header-accent)]",f={transitionDelay:`${i*40}ms`};return t.spa?e.jsx(n,{to:"/",className:m,style:f,onClick:()=>a(!1),children:t.label},t.label):e.jsx("a",{href:t.href,className:m,style:f,onClick:()=>a(!1),children:t.label},t.label)})}),e.jsx("div",{className:"mt-auto space-y-3",children:l&&s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t border-white/10 pt-3",children:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-2",children:[s.photo_url?e.jsx("img",{src:s.photo_url,alt:s.name??"User",className:"h-10 w-10 object-cover border-2 border-white/20"}):e.jsx("div",{className:"flex h-10 w-10 items-center justify-center bg-white/10 border-2 border-white/20",children:e.jsx(u,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:s.name??"UsuÃ¡rio"}),e.jsx("p",{className:"text-xs text-white/60",children:l.user.email})]})]})}),(s.role==="admin"||s.role==="author")&&e.jsxs(n,{to:"/admin/dashboard",className:"flex items-center gap-2 bg-white/10 px-4 py-3 text-sm font-semibold text-white border border-white/20 hover:bg-white/20 transition-colors",onClick:()=>a(!1),children:[e.jsx(b,{className:"h-4 w-4"}),"Painel Admin"]}),e.jsxs("button",{type:"button",onClick:async()=>{a(!1),await h()},className:"flex w-full items-center gap-2 bg-white px-4 py-3 text-sm font-semibold text-[color:var(--header-ink)] hover:bg-gray-100 transition-colors",children:[e.jsx(p,{className:"h-4 w-4"}),"Sair"]})]}):e.jsx(n,{to:"/auth/sign-in",className:"flex items-center justify-between bg-white px-4 py-3 text-sm font-semibold text-[color:var(--header-ink)]",onClick:()=>a(!1),children:"Entrar"})})]})]})}export{z as H};
