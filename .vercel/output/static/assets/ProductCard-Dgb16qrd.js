import{e as m,z as f,w as h,j as r,s as y,t as s}from"./main-B5FlV0ud.js";import{S as g}from"./x-DfPbw0Sj.js";import{L as v}from"./link-2-DMSZLQdF.js";const w=350,N=160,j=e=>e==null||Number.isNaN(e)?"":new Intl.NumberFormat("pt-MZ",{style:"currency",currency:"MZN",maximumFractionDigits:0}).format(e),b=e=>e.cover_url?e.cover_url:e.cover_path?y.storage.from("covers").getPublicUrl(e.cover_path).data.publicUrl:null,l=e=>`/livro/${e.slug??e.id}`,C=async e=>{if(typeof window<"u"&&window.isSecureContext&&navigator.clipboard?.writeText)try{return await navigator.clipboard.writeText(e),!0}catch{}const t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="fixed",t.style.top="-1000px",t.style.left="-1000px",t.style.opacity="0",document.body.appendChild(t),t.focus(),t.select(),t.setSelectionRange(0,t.value.length);const i=document.execCommand("copy");return document.body.removeChild(t),i};function A({book:e,compact:t=!1}){const{addToCart:i}=m(),n=b(e),o=j(e.price_mzn),c=e.description||e.seo_description||"",a=c?f(c,t?N:w):"Descricao indisponivel.",d=h(e.stock??0),u=()=>{if(!d){s.error("Este livro esta esgotado");return}i({id:e.id,title:e.title,slug:e.slug??e.id,price_mzn:e.price_mzn??0,stock:e.stock??0,cover_url:n}),s.success("Adicionado ao carrinho")},p=async()=>{if(typeof window>"u")return;const x=new URL(l(e),window.location.origin).toString();try{if(!await C(x)){s.error("Nao foi possivel copiar o link");return}s.success("Link copiado")}catch{s.error("Nao foi possivel copiar o link")}};return r.jsxs("div",{className:`group ${t?"space-y-3":"space-y-4"}`,children:[r.jsxs("div",{className:"relative bg-[#e6e0db] p-10 rounded-none",children:[r.jsx("div",{className:"aspect-[3/4] w-full overflow-hidden bg-white/60 rounded-none",children:n?r.jsx("img",{src:n,alt:e.title,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-105",loading:"lazy"}):r.jsx("div",{className:"flex h-full w-full items-center justify-center text-xs uppercase tracking-[0.3em] text-gray-400",children:"Sem capa"})}),r.jsxs("div",{className:"absolute inset-0 flex items-center justify-center gap-3 bg-black/50 opacity-0 transition-opacity duration-300 group-hover:opacity-100 group-focus-within:opacity-100",children:[r.jsx("button",{type:"button",onClick:u,className:"flex h-12 w-12 items-center justify-center rounded-full bg-[color:var(--brand)] text-white transition-transform hover:scale-105","aria-label":"Adicionar ao carrinho",children:r.jsx(g,{className:"h-5 w-5"})}),r.jsx("button",{type:"button",onClick:p,className:"flex h-12 w-12 items-center justify-center rounded-full bg-[color:var(--brand)] text-white transition-transform hover:scale-105","aria-label":"Copiar link do livro",children:r.jsx(v,{className:"h-5 w-5"})})]})]}),r.jsxs("div",{className:t?"space-y-2":"space-y-3",children:[r.jsx("a",{href:l(e),className:`block font-semibold text-gray-900 transition-colors hover:text-gray-700 ${t?"text-lg":"text-xl"}`,children:e.title}),!t&&r.jsx("p",{className:"text-sm leading-relaxed text-gray-600",children:a}),t&&a&&r.jsx("p",{className:"text-xs leading-relaxed text-gray-600",children:a}),o&&r.jsx("p",{className:`${t?"text-base":"text-lg"} font-semibold text-[color:var(--brand)]`,children:o})]})]})}export{A as P};
