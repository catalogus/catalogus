import{a as v,d as b,r as i,j as e,t as l}from"./main-B5FlV0ud.js";import{I as n,B as N}from"./button-BmSOyNex.js";import{L as t}from"./label-Chk9yu5q.js";function S(){const{signUpAuthor:h}=v(),u=b(),[a,p]=i.useState({name:"",email:"",password:"",confirmPassword:"",phone:"",bio:""}),[x,g]=i.useState(null),[c,j]=i.useState(null),[d,m]=i.useState(!1),o=(s,r)=>{p(w=>({...w,[s]:r}))},f=s=>{const r=s.target.files?.[0]??null;g(r),r&&j(URL.createObjectURL(r))},y=async s=>{if(s.preventDefault(),a.password!==a.confirmPassword){l.error("Passwords do not match");return}if(a.password.length<8){l.error("Password must be at least 8 characters");return}m(!0);try{const{error:r}=await h(a.email,a.password,a.name,a.phone,a.bio,x);if(r){l.error(r.message||"Failed to sign up");return}l.success("Account created successfully! Awaiting admin approval. You can now sign in."),u({to:"/author/sign-in"})}catch(r){l.error(r.message||"An unexpected error occurred")}finally{m(!1)}};return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4 py-12",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-sm border border-gray-200 p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Author Sign Up"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Create your author account to start publishing"})]}),e.jsxs("form",{onSubmit:y,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(t,{htmlFor:"name",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(n,{id:"name",type:"text",value:a.name,onChange:s=>o("name",s.target.value),required:!0,minLength:2,maxLength:100,placeholder:"John Doe"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(t,{htmlFor:"email",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(n,{id:"email",type:"email",value:a.email,onChange:s=>o("email",s.target.value),required:!0,placeholder:"author@example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(t,{htmlFor:"password",children:["Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(n,{id:"password",type:"password",value:a.password,onChange:s=>o("password",s.target.value),required:!0,minLength:8,placeholder:"Minimum 8 characters"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(t,{htmlFor:"confirmPassword",children:["Confirm Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(n,{id:"confirmPassword",type:"password",value:a.confirmPassword,onChange:s=>o("confirmPassword",s.target.value),required:!0,minLength:8,placeholder:"Re-enter password"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"phone",children:"Phone (optional)"}),e.jsx(n,{id:"phone",type:"tel",value:a.phone,onChange:s=>o("phone",s.target.value),placeholder:"+258 84 123 4567"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"bio",children:"Bio (optional)"}),e.jsx("textarea",{id:"bio",value:a.bio,onChange:s=>o("bio",s.target.value),maxLength:500,rows:3,placeholder:"Tell us about yourself (max 500 characters)",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-gray-900 focus:outline-none focus:ring-1 focus:ring-gray-900"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[a.bio.length,"/500 characters"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"photo",children:"Profile Photo (optional)"}),c&&e.jsx("div",{className:"mb-2",children:e.jsx("img",{src:c,alt:"Preview",className:"h-24 w-24 rounded-lg object-cover border border-gray-200"})}),e.jsx(n,{id:"photo",type:"file",accept:"image/jpeg,image/png,image/webp,image/gif",onChange:f}),e.jsx("p",{className:"text-xs text-gray-500",children:"Max 5MB. Supported formats: JPG, PNG, WEBP, GIF"})]}),e.jsx(N,{type:"submit",disabled:d,className:"w-full",children:d?"Creating Account...":"Sign Up"})]}),e.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("a",{href:"/author/sign-in",className:"font-semibold text-gray-900 hover:underline",children:"Sign in"})]})]})})}export{S as component};
