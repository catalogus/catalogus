import{$ as k,r as x,j as e,L as j,a as S,d as A}from"./main-B5FlV0ud.js";import{c as m,S as w,L as v,C,U as M,a as _,X as E,M as L}from"./x-DfPbw0Sj.js";import{I as $,B as I}from"./button-BmSOyNex.js";import{S as z}from"./search-BWiiaxVB.js";const B=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],H=m("book-open",B);const O=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],N=m("file-text",O);const U=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],F=m("house",U);const D=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],P=m("image",D);const T=[["rect",{width:"8",height:"18",x:"3",y:"3",rx:"1",key:"oynpb5"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M20.4 18.9c.2.5-.1 1.1-.6 1.3l-1.9.7c-.5.2-1.1-.1-1.3-.6L11.1 5.1c-.2-.5.1-1.1.6-1.3l1.9-.7c.5-.2 1.1.1 1.3.6Z",key:"1qboyk"}]],q=m("library-big",T);const Q=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],p=m("users",Q),V=[{name:"Dashboard",href:"/admin/dashboard",icon:v},{name:"Hero Slides",href:"/admin/hero-slides",icon:P},{name:"Posts",href:"/admin/posts",icon:N},{name:"Books",href:"/admin/books",icon:H},{name:"Orders",href:"/admin/orders",icon:w},{name:"Users",href:"/admin/users",icon:p},{name:"Authors",href:"/admin/authors",icon:p},{name:"Content",href:"/admin/content",icon:N,subItems:[{name:"Partners",href:"/admin/content/partners",icon:p},{name:"Services",href:"/admin/content/services",icon:q},{name:"Projects",href:"/admin/content/projects",icon:v}]}],W=[{name:"Profile",href:"/author/profile",icon:p}],G=[{name:"Orders",href:"/admin/orders",icon:w}];function X({userRole:a="admin"}){const t=k({select:s=>s.location.pathname}),[n,l]=x.useState(new Set),i=x.useMemo(()=>a==="author"?W:a==="customer"?G:V,[a]);x.useEffect(()=>{const s=new Set(n);i.forEach(r=>{r.subItems?.length&&t.startsWith(r.href)&&s.add(r.name)}),l(s)},[t]);const h=s=>{l(r=>{const c=new Set(r);return c.has(s)?c.delete(s):c.add(s),c})},o=s=>t===s||t.startsWith(`${s}/`);return e.jsxs("div",{className:"flex flex-col h-full bg-[#fafafa] text-[#111827] border-r border-gray-200",children:[e.jsx("div",{className:"flex items-center px-6 py-5",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-2xl bg-black text-white flex items-center justify-center font-semibold",children:"C"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-semibold",children:"Catalogus"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Admin"})]})]})}),e.jsx("nav",{className:"flex-1 px-4 py-4 space-y-2 overflow-y-auto",children:i.map(s=>{const r=s.icon,c=s.subItems?.length,u=n.has(s.name);if(c)return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>h(s.name),className:"w-full flex items-center justify-between px-3 py-3 rounded-3xl text-sm font-medium text-[#111827] hover:bg-gray-900 hover:text-white transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(r,{className:"w-5 h-5"}),s.name]}),e.jsx(C,{className:`w-4 h-4 transition-transform ${u?"rotate-180":""}`})]}),u&&e.jsx("div",{className:"ml-4 mt-2 space-y-1",children:s.subItems.map(d=>{const f=d.icon,b=o(d.href);return e.jsxs(j,{to:d.href,className:`flex items-center px-3 py-2 rounded-2xl text-sm transition-colors ${b?"bg-[#EAEAEA] text-black font-medium":"text-[#374151] hover:bg-gray-100"}`,children:[e.jsx(f,{className:"w-4 h-4 mr-3"}),d.name]},d.name)})})]},s.name);const g=o(s.href);return e.jsxs(j,{to:s.href,className:`flex items-center px-3 py-3 rounded-3xl text-sm font-medium transition-colors ${g?"bg-[#EAEAEA] text-black":"text-[#111827] hover:bg-gray-900 hover:text-white"}`,children:[e.jsx(r,{className:"w-5 h-5 mr-3"}),s.name]},s.name)})})]})}const Z=a=>a?.split(" ").map(t=>t[0]).join("").toUpperCase()||"CA",J=a=>{switch(a){case"admin":return{label:"Admin",classes:"bg-red-100 text-red-800"};case"author":return{label:"Author",classes:"bg-blue-100 text-blue-800"};case"customer":return{label:"Customer",classes:"bg-green-100 text-green-800"};default:return{label:"User",classes:"bg-gray-100 text-gray-800"}}},K=a=>{switch(a){case"full_admin":return{label:"Full Admin",classes:"bg-yellow-100 text-yellow-800"};case"staff":return{label:"Staff",classes:"bg-purple-100 text-purple-800"};case"technician":return{label:"Technician",classes:"bg-blue-100 text-blue-800"};default:return{label:null,classes:""}}};function Y({userRole:a="admin",adminLevel:t="full_admin",userName:n="Catalogus Admin",userEmail:l="admin@catalogus.com",onSignOut:i,onProfileSettings:h}){const[o,s]=x.useState(""),[r,c]=x.useState(!1),u=async()=>{await i?.()},{label:g,classes:d}=J(a),{label:f,classes:b}=K(t);return e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1 max-w-xs",children:e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx($,{type:"text",placeholder:"Search...",value:o,onChange:y=>s(y.target.value),className:"pl-10"})]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>c(y=>!y),className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n}),e.jsx("p",{className:"text-xs text-gray-500",children:l})]}),e.jsx("div",{className:"w-10 h-10 bg-black rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-semibold text-sm",children:Z(n)})})]}),r&&e.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n}),e.jsx("p",{className:"text-xs text-gray-500",children:l}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${d}`,children:g}),f&&e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${b}`,children:f})]})]}),e.jsxs("div",{className:"py-1",children:[e.jsxs(j,{to:"/",className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>c(!1),children:[e.jsx(F,{className:"w-4 h-4 mr-3"}),"Homepage"]}),e.jsxs("button",{onClick:()=>{c(!1),h?.()},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[e.jsx(M,{className:"w-4 h-4 mr-3"}),"Profile Settings"]}),e.jsxs(I,{onClick:u,variant:"ghost",className:"flex items-center w-full justify-start px-4 py-2 text-sm text-rose-600 hover:bg-rose-50",children:[e.jsx(_,{className:"w-4 h-4 mr-3"}),"Sign Out"]})]})]})]})]})})}function te({children:a,userRole:t="admin",adminLevel:n="full_admin",userName:l="Catalogus Admin",userEmail:i="admin@catalogus.com",onSignOut:h}){const[o,s]=x.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-[#FAFAFA] flex overflow-hidden",children:[o&&e.jsx("div",{className:"fixed inset-0 z-40 lg:hidden",onClick:()=>s(!1),children:e.jsx("div",{className:"absolute inset-0 bg-gray-600 opacity-75"})}),e.jsx("div",{className:`
          fixed inset-y-0 left-0 z-50 w-72 transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0
          ${o?"translate-x-0":"-translate-x-full"}
        `,children:e.jsx(X,{userRole:t})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(Y,{userRole:t,adminLevel:n,userName:l,userEmail:i,onSignOut:h}),e.jsx("main",{className:"flex-1 overflow-y-auto px-6 pb-8",children:e.jsx("div",{className:"p-6 bg-white rounded-3xl shadow-[0_2px_8px_0_rgba(0,0,0,0.1)]",children:a})})]}),e.jsx("button",{className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-white rounded-lg shadow-lg",onClick:()=>s(r=>!r),children:o?e.jsx(E,{className:"w-6 h-6 text-gray-600"}):e.jsx(L,{className:"w-6 h-6 text-gray-600"})})]})}function ne({children:a}){const{session:t,profile:n,loading:l}=S(),i=A();return x.useEffect(()=>{l||(!t||n?.role!=="admin")&&i({to:"/auth/sign-in",search:{redirect:"/admin/dashboard"},replace:!0})},[t,n?.role,l,i]),l?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Loading..."})]})}):!t||n?.role!=="admin"?null:e.jsx(e.Fragment,{children:a})}export{ne as A,te as D,P as I};
