
Description
The Query Transaction Status API is used to determine the current status of a particular transaction. Using either the Transaction ID or the Conversation ID of the transaction from the Mobile Money Platform, the M-Pesa Payments Gateway will return information about the transaction’s status.
Resource URL
Address 	Port 	Path 	Ssl
api.sandbox.vm.co.mz 	18353 	/ipg/v1x/queryTransactionStatus/ 	✔
Header Parameters
Name 	Description 	Possible Values
Content-Type 	Application/JSON header 	application/json
Authorization 	Authorization Token 	Authorization: “Bearer” keyword followed by a space and generated Access Token from Auth API.Like “Bearer xxxxxxx”
Origin 	Cross-Origin Resource Sharing (CORS) 	developer.mpesa.vm.co.mz
Request Parameters
Name 	Description 	Type 	Required 	Possible Values
input_ThirdPartyReference 	This is the unique reference of the third party system. When there are queries about transactions, this will usually be used to track a transaction. 	String 	✔ 	11114
input_QueryReference 	Populate this with one of the following 3 parameters returned from the iPG platform to query the status of the transaction. 1. Mobile Money Platform TransactionID. 2. ThirdPartyReference. 3. iNSight ConversationID 	String 	✔ 	5C1400CVRO, AG_20180206_00005e7dccc6da08efa8
input_ServiceProviderCode 	Shortcode of the business where funds will be credited to. 	String 	✔ 	171717
Response Parameters

    Synchronous
    Asynchronous

Name 	Description 	Type 	Possible Values
output_ConversationID 	This gets generated by the Mobile Money platform. This is used to query transactions on the Mobile Money Platform. 	String 	AG_20180206_00005e7dccc6da08efa8
output_ResponseDesc 	This gets generated by the iPG platform to indicate the status of the transaction 	String 	See response table below
output_ResponseCode 	This gets generated by the iPG platform to indicate the status of the transaction 	String 	See response table below
output_ThirdPartyReference 	This is the reference of the third party system. When there are queries about transactions, this will usually be used to track a transaction. 	String 	11114
output_ResponseTransactionStatus 	This gets generated by the Mobile Money platform. This will indicate if the transaction was processed successfully or not. 	String 	Cancelled, Completed, Expired, N/A
Response Codes & Descriptions
Http Status Code 	Code 	Description
200 / 201 	INS-0 	Request processed successfully
500 	INS-1 	Internal Error
401 	INS-2 	Invalid API Key
401 	INS-4 	User is not active
401 	INS-5 	Transaction cancelled by customer
401 	INS-6 	Transaction Failed
408 	INS-9 	Request timeout
409 	INS-10 	Duplicate Transaction
400 	INS-13 	Invalid Shortcode Used
400 	INS-14 	Invalid Reference Used
400 	INS-15 	Invalid Amount Used
503 	INS-16 	Unable to handle the request due to a temporary overloading
400 	INS-17 	Invalid Transaction Reference. Length Should Be Between 1 and 20.
400 	INS-18 	Invalid TransactionID Used
400 	INS-19 	Invalid ThirdPartyReference Used
400 	INS-20 	Not All Parameters Provided. Please try again.
400 	INS-21 	Parameter validations failed. Please try again.
400 	INS-22 	Invalid Operation Type
400 	INS-23 	Unknown Status. Contact M-Pesa Support
400 	INS-24 	Invalid InitiatorIdentifier Used
400 	INS-25 	Invalid SecurityCredential Used
400 	INS-26 	Not authorized
400 	INS-993 	Direct Debit Missing
400 	INS-994 	Direct Debit Already Exists
400 	INS-995 	Customer's Profile Has Problems
400 	INS-996 	Customer Account Status Not Active
400 	INS-997 	Linking Transaction Not Found
400 	INS-998 	Invalid Market
400 	INS-2001 	Initiator authentication error.
400 	INS-2002 	Receiver invalid.
422 	INS-2006 	Insufficient balance
400 	INS-2051 	MSISDN invalid.
400 	INS-2057 	Language code invalid.
Request

GET /ipg/v1x/queryTransactionStatus/?input_ThirdPartyReference=11114&input_QueryReference=5C1400CVRO&input_ServiceProviderCode=171717 HTTP/1.1

Host: api.sandbox.vm.co.mz
Content-Type: application/json
Authorization: Bearer AiuCfWvpJyJh7zRMwWNPNt/rNCtRNMkOJSXNql/3BZ0F5Rq/dHwgKmLXDEpupadHxGtHTyEApD0/BtX53SRTPYO2J9FLcRGKEzWO6nqyqX9dqoSh8IxQy6ZVw/bTj02AEEoWizVplerggJSJPOqQlo3MiACMMqHG7hPK82JdQPkxPX1CHEI0RfMetPikkql6cYf1xlqMikF43sER/KXtKH17ZtMFfRJqBgejaH/TgVjntAONePggbcEEcT0d4UP5q3XjiLOz4e52uua6/tr3PuYdfr1vIZZPQdXCpS8VVP9lCQqxdThILwKipMEddi49i5R5in9doNVnPAl+uVOHpRcTs/sgeEiG2hMJNXcV/a63Yq8cfd1FJAnEPg0AomP9dQ8qjE/8+yS9aVB18TXzuY2Yowy4WH3bTGXLdY/MSkq4AcTiXGDrfOIGbxhsZyxi8xp+gdkhoADksLHhmb94Xml4yz8Jg+VgaYM2E8Ny8Y9SfRFe+zbpp4uKlMX3kmo5+2m+vZnDshav9PRfKl5ZGvxd+pNTHNc1krIu5UmZE8SGNH7U6/CnUE+7vLjMI/xSlNgslZXmcrAFr+m5gcZcKysz46h2y6ClglXc7iwCEHouQlKY52dUSW6uPfchzhjS02pNtWIAFyHP91iecr7nUl8K5tDfwT7//ZBRLJ3wBoY=
Origin: developer.mpesa.vm.co.mz


