
Description
The C2B API Call is used as a standard customer-to-business transaction. Funds from the customer’s mobile money wallet will be deducted and be transferred to the mobile money wallet of the business. To authenticate and authorize this transaction, M-Pesa Payments Gateway will initiate a USSD Push message to the customer to gather and verify the mobile money PIN number. This number is not stored and is used only to authorize the transaction.
Resource URL
Address 	Port 	Path 	Ssl
api.sandbox.vm.co.mz 	18352 	/ipg/v1x/c2bPayment/singleStage/ 	✔
Header Parameters
Name 	Description 	Possible Values
Content-Type 	Application/JSON header 	application/json
Authorization 	Authorization Token 	Authorization: “Bearer” keyword followed by a space and generated Access Token from Auth API.Like “Bearer xxxxxxx”
Origin 	Cross-Origin Resource Sharing (CORS) 	developer.mpesa.vm.co.mz
Request Parameters
Name 	Description 	Type 	Required 	Possible Values
input_TransactionReference 	This is the reference of the transaction for the customer or business making the transaction. This can be a smartcard number for a TV subscription or a reference number of a utility bill. 	String 	✔ 	T12344C
input_CustomerMSISDN 	MSISDN of the customer for the transaction 	String 	✔ 	258843330333
input_Amount 	The amount for the transaction. 	String 	✔ 	10
input_ThirdPartyReference 	This is the unique reference of the third party system. When there are queries about transactions, this will usually be used to track a transaction. 	String 	✔ 	11114
input_ServiceProviderCode 	Shortcode of the business where funds will be credited to. 	String 	✔ 	171717
Response Parameters

    Synchronous
    Asynchronous

Name 	Description 	Type 	Possible Values
output_ConversationID 	This gets generated by the Mobile Money platform. This is used to query transactions on the Mobile Money Platform. 	String 	AG_20180206_00005e7dccc6da08efa8
output_TransactionID 	This gets generated by the Mobile Money platform. This is used to query transactions on the Mobile Money Platform. 	String 	4XDF12345
output_ResponseDesc 	This gets generated by the iPG platform to indicate the status of the transaction 	String 	See response table below
output_ResponseCode 	This gets generated by the iPG platform to indicate the status of the transaction 	String 	See response table below
output_ThirdPartyReference 	This is the reference of the third party system. When there are queries about transactions, this will usually be used to track a transaction. 	String 	11114
Response Codes & Descriptions
Http Status Code 	Code 	Description
200 / 201 	INS-0 	Request processed successfully
500 	INS-1 	Internal Error
401 	INS-2 	Invalid API Key
401 	INS-4 	User is not active
401 	INS-5 	Transaction cancelled by customer
401 	INS-6 	Transaction Failed
408 	INS-9 	Request timeout
409 	INS-10 	Duplicate Transaction
400 	INS-13 	Invalid Shortcode Used
400 	INS-14 	Invalid Reference Used
400 	INS-15 	Invalid Amount Used
503 	INS-16 	Unable to handle the request due to a temporary overloading
400 	INS-17 	Invalid Transaction Reference. Length Should Be Between 1 and 20.
400 	INS-18 	Invalid TransactionID Used
400 	INS-19 	Invalid ThirdPartyReference Used
400 	INS-20 	Not All Parameters Provided. Please try again.
400 	INS-21 	Parameter validations failed. Please try again.
400 	INS-22 	Invalid Operation Type
400 	INS-23 	Unknown Status. Contact M-Pesa Support
400 	INS-24 	Invalid InitiatorIdentifier Used
400 	INS-25 	Invalid SecurityCredential Used
400 	INS-26 	Not authorized
400 	INS-993 	Direct Debit Missing
400 	INS-994 	Direct Debit Already Exists
400 	INS-995 	Customer's Profile Has Problems
400 	INS-996 	Customer Account Status Not Active
400 	INS-997 	Linking Transaction Not Found
400 	INS-998 	Invalid Market
400 	INS-2001 	Initiator authentication error.
400 	INS-2002 	Receiver invalid.
422 	INS-2006 	Insufficient balance
400 	INS-2051 	MSISDN invalid.
400 	INS-2057 	Language code invalid.
Request

POST /ipg/v1x/c2bPayment/singleStage/ HTTP/1.1
Host: api.sandbox.vm.co.mz
Content-Type: application/json
Authorization: Bearer hamHdPyGCZ5cXlNd7dIHdMQZTimblDK9cz4fDgD4M4/PQEai1ZSFIA6oHN6IeZaEkmgqO2CkMKk/L/kveR8ULgJyuRVPL0t09+59W7/PleIAeJT4IcX3yJmDCemjHksPwMiJThCXKT+9eh84n2bja24GcydF0PluaFORTpwkkbx6lSqxRRXCIUWuwREQAzQLbOksK0czEbOut8pLG294Asd0VuVNQr5RlXpJjY5MS1Nqm9tD9ChWVj6EJ0miQpyyV1y5E/O4JDO4reQQCDijwxx5OQ3cY16NbNv3ULi7pjeRnyisVtpxSGh4Wr+J+atL97BpUuVKf7gqzlWGRSxX613NYTOhi3Hm33ovFLtXZVUjCb0ZaH3l7sK5Q531OueShWeKZXKvPmbWhrO9VGu+WZzxWNuVrB0crEaMEKBxULVwT/uGfV7OGCPw636nQQxvXBTvtrASTMNmHzD4WwxwK7h/rdPWScZD0Yz8+/KeCpj/G0QI5JCitFiH0uxDN8Jdb2G0mZLzJmKzTYkq4GU1uG7X4MajARZaZzApoyUSRF9EvlqNxTlUDc7no6FVhHKSiToum7HQoSRG2s0A/aD07MUP7X+gy3YEluVfOwYDrF/ydAszU7mAU7V/lC08e9rmDro0EJiOfkB/ANip17cLBC3Gx7U9hLg2sm3ySgvbmjQ=
Origin: developer.mpesa.vm.co.mz


{
	"input_TransactionReference": "T12344C",
	"input_CustomerMSISDN": "258843330333",
	"input_Amount": "10",
	"input_ThirdPartyReference": "18AJ3S",
	"input_ServiceProviderCode": "171717"
}

